# Autorebuilder
Autorebuilder - приложение, для автоматического обновления  локального резпозитория проекта, в случае появлений каких-либо изменений на основной ветке удаленного репозитория. 

## Содержание
- [язык] Python
- [Технологии] FastAPI, docker, subprocess
- [Начало работы] docker compose up --build -d 

## Использование
### Конфигурирование 
#### .env:
- HOST_IP - IP, по которому будет доступен сервер
- PORT - порт для API
- PATH_VOLUMES - каталог монтирования директории с хоста
- MAIN_BRANCH - отслеживаемая ветка удаленного репозитория
- REMOTE - название удаленного репозитория

##### Пример:
```.env
- HOST_IP='0.0.0.0'
- PORT='4000'
- PATH_VOLUMES='/data'
- MAIN_BRANCH='main'
- REMOTE='origin'
```

#### docker-compose.yml
```yml
volumes:
    - <путь_до_сервиса_на_хосте>:<значение_PATH_VOLUMES_env>
```

#### in_container
Для корректной работы необходимо залезть внутрь контенера и выполнить базовые команды git pull и git push 

#### gitea/github
В репозитории необходимо настроить вебхук на url: http://webhooks:4000/gitea/webhooks
В событиях отправки вебхука, указать то, что вам необходимо
Указать отслежваемую ветку: {навание_ветки}

### Установка зависимостей
Для установки зависимостей, выполните команду:
```sh
pip install > requirements.txt
```

## Особености 
Важно учитывать доменные имена внутри docker сети. При настройке репозитория, необходимо поменять url. Например с http//:127.0.0.1:4000/.../... на http//:gitea:4000/.../...