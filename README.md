# Autorebuilder
Autorebuilder - приложение, для автоматического обновления  локального резпозитория проекта, в случае появлений каких-либо изменений на основной ветке удаленного репозитория. 

## Содержание
- [язык] Python
- [Технологии] FastAPI, docker, subprocess
- [Начало работы] docker compose up --build -d 

## Использование
### Конфигурирование 
#### .env:
- HOST_IP - IP, по которому будет доступен сервер
- PORT - порт для API
- PATH_VOLUMES - каталог монтирования директории с хоста
- SERVICES_LIST - строка с разделенными через пробел наваниями сервисов
- MAIN_BRANCH - отслеживаемая ветка удаленного репозитория
- REMOTE - название удаленного репозитория

##### Пример:
```.env
HOST_IP='0.0.0.0'
PORT='4000'
PATH_VOLUMES='/data'
SERVICES_LIST='service_1 service_2 service_3 service_4'
MAIN_BRANCH='master'
REMOTE='origin'
```

#### docker-compose.yml
```yml
volumes:
    - <путь_до_папки_с_сервисами_на_хосте>:<значение_PATH_VOLUMES_env>
```

#### gitea/github
В репозитории или глобально в github/gitea необходимо настроить вебхук на url: http://webhooks:4000/gitea/webhooks 
В событиях отправки вебхука нужно указать на какое событие реагировать
Указать отслежваемую ветку: {навание_ветки}

### Установка зависимостей
Для установки зависимостей, выполните команду:
```sh
pip install > requirements.txt
```

## Особености 
Важно учитывать доменные имена внутри docker сети. При настройке репозитория, необходимо поменять url. Например с http//:127.0.0.1:4000/.../... на http//:gitea:4000/.../...